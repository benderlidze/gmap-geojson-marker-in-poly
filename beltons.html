<!DOCTYPE html>
<html>

<head>
    <title>BSD Elementary Zones</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <script
        type="text/javascript">window.NREUM || (NREUM = {}); NREUM.info = { "beacon": "bam-cell.nr-data.net", "errorBeacon": "bam-cell.nr-data.net", "licenseKey": "e84461d315", "applicationID": "29799298", "transactionName": "Z1MEZEtSVkoFBxIKX14ZKF9LXllVDR4DBx8a", "queueTime": 15, "applicationTime": 21, "agent": "", "atts": "" }</script>
    <script
        type="text/javascript">(window.NREUM || (NREUM = {})).init = { ajax: { deny_list: ["bam-cell.nr-data.net"] } }; (window.NREUM || (NREUM = {})).loader_config = { licenseKey: "e84461d315", applicationID: "29799298" }; window.NREUM || (NREUM = {}), __nr_require = function (t, e, n) { function r(n) { if (!e[n]) { var i = e[n] = { exports: {} }; t[n][0].call(i.exports, function (e) { var i = t[n][1][e]; return r(i || e) }, i, i.exports) } return e[n].exports } if ("function" == typeof __nr_require) return __nr_require; for (var i = 0; i < n.length; i++)r(n[i]); return r }({ 1: [function (t, e, n) { function r() { } function i(t, e, n, r) { return function () { return s.recordSupportability("API/" + e + "/called"), o(t + e, [u.now()].concat(c(arguments)), n ? null : this, r), n ? void 0 : this } } var o = t("handle"), a = t(9), c = t(10), f = t("ee").get("tracer"), u = t("loader"), s = t(4), d = NREUM; "undefined" == typeof window.newrelic && (newrelic = d); var p = ["setPageViewName", "setCustomAttribute", "setErrorHandler", "finished", "addToTrace", "inlineHit", "addRelease"], l = "api-", v = l + "ixn-"; a(p, function (t, e) { d[e] = i(l, e, !0, "api") }), d.addPageAction = i(l, "addPageAction", !0), d.setCurrentRouteName = i(l, "routeName", !0), e.exports = newrelic, d.interaction = function () { return (new r).get() }; var m = r.prototype = { createTracer: function (t, e) { var n = {}, r = this, i = "function" == typeof e; return o(v + "tracer", [u.now(), t, n], r), function () { if (f.emit((i ? "" : "no-") + "fn-start", [u.now(), r, i], n), i) try { return e.apply(this, arguments) } catch (t) { throw f.emit("fn-err", [arguments, this, t], n), t } finally { f.emit("fn-end", [u.now()], n) } } } }; a("actionText,setName,setAttribute,save,ignore,onEnd,getContext,end,get".split(","), function (t, e) { m[e] = i(v, e) }), newrelic.noticeError = function (t, e) { "string" == typeof t && (t = new Error(t)), s.recordSupportability("API/noticeError/called"), o("err", [t, u.now(), !1, e]) } }, {}], 2: [function (t, e, n) { function r(t) { if (NREUM.init) { for (var e = NREUM.init, n = t.split("."), r = 0; r < n.length - 1; r++)if (e = e[n[r]], "object" != typeof e) return; return e = e[n[n.length - 1]] } } e.exports = { getConfiguration: r } }, {}], 3: [function (t, e, n) { var r = !1; try { var i = Object.defineProperty({}, "passive", { get: function () { r = !0 } }); window.addEventListener("testPassive", null, i), window.removeEventListener("testPassive", null, i) } catch (o) { } e.exports = function (t) { return r ? { passive: !0, capture: !!t } : !!t } }, {}], 4: [function (t, e, n) { function r(t, e) { var n = [a, t, { name: t }, e]; return o("storeMetric", n, null, "api"), n } function i(t, e) { var n = [c, t, { name: t }, e]; return o("storeEventMetrics", n, null, "api"), n } var o = t("handle"), a = "sm", c = "cm"; e.exports = { constants: { SUPPORTABILITY_METRIC: a, CUSTOM_METRIC: c }, recordSupportability: r, recordCustom: i } }, {}], 5: [function (t, e, n) { function r() { return c.exists && performance.now ? Math.round(performance.now()) : (o = Math.max((new Date).getTime(), o)) - a } function i() { return o } var o = (new Date).getTime(), a = o, c = t(11); e.exports = r, e.exports.offset = a, e.exports.getLastTimestamp = i }, {}], 6: [function (t, e, n) { function r(t, e) { var n = t.getEntries(); n.forEach(function (t) { "first-paint" === t.name ? l("timing", ["fp", Math.floor(t.startTime)]) : "first-contentful-paint" === t.name && l("timing", ["fcp", Math.floor(t.startTime)]) }) } function i(t, e) { var n = t.getEntries(); if (n.length > 0) { var r = n[n.length - 1]; if (u && u < r.startTime) return; var i = [r], o = a({}); o && i.push(o), l("lcp", i) } } function o(t) { t.getEntries().forEach(function (t) { t.hadRecentInput || l("cls", [t]) }) } function a(t) { var e = navigator.connection || navigator.mozConnection || navigator.webkitConnection; if (e) return e.type && (t["net-type"] = e.type), e.effectiveType && (t["net-etype"] = e.effectiveType), e.rtt && (t["net-rtt"] = e.rtt), e.downlink && (t["net-dlink"] = e.downlink), t } function c(t) { if (t instanceof y && !w) { var e = Math.round(t.timeStamp), n = { type: t.type }; a(n), e <= v.now() ? n.fid = v.now() - e : e > v.offset && e <= Date.now() ? (e -= v.offset, n.fid = v.now() - e) : e = v.now(), w = !0, l("timing", ["fi", e, n]) } } function f(t) { "hidden" === t && (u = v.now(), l("pageHide", [u])) } if (!("init" in NREUM && "page_view_timing" in NREUM.init && "enabled" in NREUM.init.page_view_timing && NREUM.init.page_view_timing.enabled === !1)) { var u, s, d, p, l = t("handle"), v = t("loader"), m = t(8), g = t(3), y = NREUM.o.EV; if ("PerformanceObserver" in window && "function" == typeof window.PerformanceObserver) { s = new PerformanceObserver(r); try { s.observe({ entryTypes: ["paint"] }) } catch (h) { } d = new PerformanceObserver(i); try { d.observe({ entryTypes: ["largest-contentful-paint"] }) } catch (h) { } p = new PerformanceObserver(o); try { p.observe({ type: "layout-shift", buffered: !0 }) } catch (h) { } } if ("addEventListener" in document) { var w = !1, b = ["click", "keydown", "mousedown", "pointerdown", "touchstart"]; b.forEach(function (t) { document.addEventListener(t, c, g(!1)) }) } m(f) } }, {}], 7: [function (t, e, n) { function r(t, e) { if (!i) return !1; if (t !== i) return !1; if (!e) return !0; if (!o) return !1; for (var n = o.split("."), r = e.split("."), a = 0; a < r.length; a++)if (r[a] !== n[a]) return !1; return !0 } var i = null, o = null, a = /Version\/(\S+)\s+Safari/; if (navigator.userAgent) { var c = navigator.userAgent, f = c.match(a); f && c.indexOf("Chrome") === -1 && c.indexOf("Chromium") === -1 && (i = "Safari", o = f[1]) } e.exports = { agent: i, version: o, match: r } }, {}], 8: [function (t, e, n) { function r(t) { function e() { t(c && document[c] ? document[c] : document[o] ? "hidden" : "visible") } "addEventListener" in document && a && document.addEventListener(a, e, i(!1)) } var i = t(3); e.exports = r; var o, a, c; "undefined" != typeof document.hidden ? (o = "hidden", a = "visibilitychange", c = "visibilityState") : "undefined" != typeof document.msHidden ? (o = "msHidden", a = "msvisibilitychange") : "undefined" != typeof document.webkitHidden && (o = "webkitHidden", a = "webkitvisibilitychange", c = "webkitVisibilityState") }, {}], 9: [function (t, e, n) { function r(t, e) { var n = [], r = "", o = 0; for (r in t) i.call(t, r) && (n[o] = e(r, t[r]), o += 1); return n } var i = Object.prototype.hasOwnProperty; e.exports = r }, {}], 10: [function (t, e, n) { function r(t, e, n) { e || (e = 0), "undefined" == typeof n && (n = t ? t.length : 0); for (var r = -1, i = n - e || 0, o = Array(i < 0 ? 0 : i); ++r < i;)o[r] = t[e + r]; return o } e.exports = r }, {}], 11: [function (t, e, n) { e.exports = { exists: "undefined" != typeof window.performance && window.performance.timing && "undefined" != typeof window.performance.timing.navigationStart } }, {}], ee: [function (t, e, n) { function r() { } function i(t) { function e(t) { return t && t instanceof r ? t : t ? u(t, f, a) : a() } function n(n, r, i, o, a) { if (a !== !1 && (a = !0), !l.aborted || o) { t && a && t(n, r, i); for (var c = e(i), f = m(n), u = f.length, s = 0; s < u; s++)f[s].apply(c, r); var p = d[w[n]]; return p && p.push([b, n, r, c]), c } } function o(t, e) { h[t] = m(t).concat(e) } function v(t, e) { var n = h[t]; if (n) for (var r = 0; r < n.length; r++)n[r] === e && n.splice(r, 1) } function m(t) { return h[t] || [] } function g(t) { return p[t] = p[t] || i(n) } function y(t, e) { l.aborted || s(t, function (t, n) { e = e || "feature", w[n] = e, e in d || (d[e] = []) }) } var h = {}, w = {}, b = { on: o, addEventListener: o, removeEventListener: v, emit: n, get: g, listeners: m, context: e, buffer: y, abort: c, aborted: !1 }; return b } function o(t) { return u(t, f, a) } function a() { return new r } function c() { (d.api || d.feature) && (l.aborted = !0, d = l.backlog = {}) } var f = "nr@context", u = t("gos"), s = t(9), d = {}, p = {}, l = e.exports = i(); e.exports.getOrSetContext = o, l.backlog = d }, {}], gos: [function (t, e, n) { function r(t, e, n) { if (i.call(t, e)) return t[e]; var r = n(); if (Object.defineProperty && Object.keys) try { return Object.defineProperty(t, e, { value: r, writable: !0, enumerable: !1 }), r } catch (o) { } return t[e] = r, r } var i = Object.prototype.hasOwnProperty; e.exports = r }, {}], handle: [function (t, e, n) { function r(t, e, n, r) { i.buffer([t], r), i.emit(t, e, n) } var i = t("ee").get("handle"); e.exports = r, r.ee = i }, {}], id: [function (t, e, n) { function r(t) { var e = typeof t; return !t || "object" !== e && "function" !== e ? -1 : t === window ? 0 : a(t, o, function () { return i++ }) } var i = 1, o = "nr@id", a = t("gos"); e.exports = r }, {}], loader: [function (t, e, n) { function r() { if (!M++) { var t = T.info = NREUM.info, e = m.getElementsByTagName("script")[0]; if (setTimeout(u.abort, 3e4), !(t && t.licenseKey && t.applicationID && e)) return u.abort(); f(x, function (e, n) { t[e] || (t[e] = n) }); var n = a(); c("mark", ["onload", n + T.offset], null, "api"), c("timing", ["load", n]); var r = m.createElement("script"); 0 === t.agent.indexOf("http://") || 0 === t.agent.indexOf("https://") ? r.src = t.agent : r.src = l + "://" + t.agent, e.parentNode.insertBefore(r, e) } } function i() { "complete" === m.readyState && o() } function o() { c("mark", ["domContent", a() + T.offset], null, "api") } var a = t(5), c = t("handle"), f = t(9), u = t("ee"), s = t(7), d = t(2), p = t(3), l = d.getConfiguration("ssl") === !1 ? "http" : "https", v = window, m = v.document, g = "addEventListener", y = "attachEvent", h = v.XMLHttpRequest, w = h && h.prototype, b = !1; NREUM.o = { ST: setTimeout, SI: v.setImmediate, CT: clearTimeout, XHR: h, REQ: v.Request, EV: v.Event, PR: v.Promise, MO: v.MutationObserver }; var E = "" + location, x = { beacon: "bam.nr-data.net", errorBeacon: "bam.nr-data.net", agent: "js-agent.newrelic.com/nr-1216.min.js" }, O = h && w && w[g] && !/CriOS/.test(navigator.userAgent), T = e.exports = { offset: a.getLastTimestamp(), now: a, origin: E, features: {}, xhrWrappable: O, userAgent: s, disabled: b }; if (!b) { t(1), t(6), m[g] ? (m[g]("DOMContentLoaded", o, p(!1)), v[g]("load", r, p(!1))) : (m[y]("onreadystatechange", i), v[y]("onload", r)), c("mark", ["firstbyte", a.getLastTimestamp()], null, "api"); var M = 0 } }, {}], "wrap-function": [function (t, e, n) { function r(t, e) { function n(e, n, r, f, u) { function nrWrapper() { var o, a, s, p; try { a = this, o = d(arguments), s = "function" == typeof r ? r(o, a) : r || {} } catch (l) { i([l, "", [o, a, f], s], t) } c(n + "start", [o, a, f], s, u); try { return p = e.apply(a, o) } catch (v) { throw c(n + "err", [o, a, v], s, u), v } finally { c(n + "end", [o, a, p], s, u) } } return a(e) ? e : (n || (n = ""), nrWrapper[p] = e, o(e, nrWrapper, t), nrWrapper) } function r(t, e, r, i, o) { r || (r = ""); var c, f, u, s = "-" === r.charAt(0); for (u = 0; u < e.length; u++)f = e[u], c = t[f], a(c) || (t[f] = n(c, s ? f + r : r, i, f, o)) } function c(n, r, o, a) { if (!v || e) { var c = v; v = !0; try { t.emit(n, r, o, e, a) } catch (f) { i([f, n, r, o], t) } v = c } } return t || (t = s), n.inPlace = r, n.flag = p, n } function i(t, e) { e || (e = s); try { e.emit("internal-error", t) } catch (n) { } } function o(t, e, n) { if (Object.defineProperty && Object.keys) try { var r = Object.keys(t); return r.forEach(function (n) { Object.defineProperty(e, n, { get: function () { return t[n] }, set: function (e) { return t[n] = e, e } }) }), e } catch (o) { i([o], n) } for (var a in t) l.call(t, a) && (e[a] = t[a]); return e } function a(t) { return !(t && t instanceof Function && t.apply && !t[p]) } function c(t, e) { var n = e(t); return n[p] = t, o(t, n, s), n } function f(t, e, n) { var r = t[e]; t[e] = c(r, n) } function u() { for (var t = arguments.length, e = new Array(t), n = 0; n < t; ++n)e[n] = arguments[n]; return e } var s = t("ee"), d = t(10), p = "nr@original", l = Object.prototype.hasOwnProperty, v = !1; e.exports = r, e.exports.wrapFunction = c, e.exports.wrapInPlace = f, e.exports.argsToArray = u }, {}] }, {}, ["loader"]);</script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.10/lodash.min.js"></script>
    <style>
        #map {
            height: 800px;
            width: 100%;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }

        .controls {
            margin-top: 10px;
            border: 1px solid transparent;
            border-radius: 2px 0 0 2px;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
            height: 32px;
            outline: none;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
        }

        #pac-input {
            background-color: #fff;
            font-family: Roboto;
            font-size: 15px;
            font-weight: 300;
            margin-left: 12px;
            padding: 0 11px 0 13px;
            text-overflow: ellipsis;
            width: 300px;
        }

        #pac-input:focus {
            border-color: #4d90fe;
        }

        .pac-container {
            font-family: Roboto;
        }

        #type-selector {
            color: #fff;
            background-color: #4d90fe;
            padding: 5px 11px 0px 11px;
        }

        #type-selector label {
            font-family: Roboto;
            font-size: 13px;
            font-weight: 300;
        }

        #legend {
            font-family: Arial, sans-serif;
            background: #fff;
            padding: 10px;
            margin: 10px;
            border: 3px solid #000;
        }

        #legend h3 {
            margin-top: 0;
        }

        .legend-member-core {
            width: 100%;
            height: 30px;
            border-bottom: 1px solid #CCC;
        }

        .legend-member {
            float: left;
            margin-top: 5px;
            margin-left: 5px;
            height: 20px;
            width: 30px;
            border: 1px solid #CCC;
            background-color: blue;
        }

        .legend-member-text {
            float: left;
            margin-top: 5px;
            margin-left: 5px;
            font-family: Arial Narrow;
            font-size: 15px;
        }

        .radio {
            background-color: white;
            margin: 10px;
            padding: 10px;
        }



        /* The Modal (background) */
        .modal {
            display: none;
            /* Hidden by default */
            position: fixed;
            /* Stay in place */
            z-index: 1;
            /* Sit on top */
            padding-top: 100px;
            /* Location of the box */
            left: 0;
            top: 0;
            width: 100%;
            /* Full width */
            height: 100%;
            /* Full height */
            overflow: auto;
            /* Enable scroll if needed */
            background-color: rgb(0, 0, 0);
            /* Fallback color */
            background-color: rgba(0, 0, 0, 0.4);
            /* Black w/ opacity */
        }

        /* Modal Content */
        .modal-content {
            position: relative;
            background-color: #fefefe;
            margin: auto;
            padding: 0;
            border: 1px solid #888;
            width: 80%;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
            -webkit-animation-name: animatetop;
            -webkit-animation-duration: 0.4s;
            animation-name: animatetop;
            animation-duration: 0.4s
        }

        /* Add Animation */
        @-webkit-keyframes animatetop {
            from {
                top: -300px;
                opacity: 0
            }

            to {
                top: 0;
                opacity: 1
            }
        }

        @keyframes animatetop {
            from {
                top: -300px;
                opacity: 0
            }

            to {
                top: 0;
                opacity: 1
            }
        }

        /* The Close Button */
        .close {
            color: white;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }

        .modal-header {
            padding: 2px 16px;
            background-color: #404040;
            color: white;
        }

        .modal-body {
            padding: 2px 16px;
        }

        .modal-footer {
            padding: 2px 16px;
            background-color: #404040;
            color: white;
        }

        #closeModal {
            background-color: #4CAF50;
            border: none;
            color: white;
            padding: 10px 15px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            margin: 5px;
        }
    </style>
</head>

<body>
    <div id="searchPannel" style="display: none">
        <input id="pac-input" class="controls" type="text" placeholder="Enter address">
        <!-- <div class="radio">
      <input type="radio" name="s" class="schoolType" id="ES" value="ES" checked /><label for="ES"> Elementary Schools</label>
      <input type="radio" name="s" class="schoolType" id="MS" value="MS" /><label for="MS"> Middle Schools</label>
      <input type="radio" name="s" class="schoolType" id="HS" value="HS" /><label for="HS"> High Schools</label>
    </div> -->
    </div>
    <div id="map"></div>
    <div id="legend" style="display:none">
        <h3>Schools Legend</h3>
        <div id="legend-body" class="legend-body" style="width:270px;">

        </div>
    </div>




    <!-- The Modal -->
    <div id="myModal" class="modal">

        <!-- Modal content -->
        <div class="modal-content">
            <div class="modal-header">
                <span class="close">&times;</span>
                <h3>Welcome to the Elementary Attendance Zone Locator for the Belton School District.</h3>
            </div>
            <div class="modal-body">
                <p>
                <h4></h4>
                We have three K-4 elementary schools serving our students. Hillcrest STEAM Academy, our
                K-6 building, is not in the locator. If you'd like to enter the enrollment pool to have your
                Pirate attend Hillcrest, please visit their webpage for more information: <a
                    href="http://bit.ly/HillcrestSA">bit.ly/HillcrestSA</a>
                </p>
                <p>If you have any questions about the Attendance Zone Locator or enrollment, please contact our offices
                    at
                    816-489-7018.</p>

            </div>
            <div class="modal-footer">
                <button id="closeModal">Close</button>
            </div>
        </div>

    </div>



    <script>

        var allPolygons = {
            HS: {
                polygons: [],
                visible: false
            },
            MS: {
                polygons: [],
                visible: false
            },
            ES: {
                polygons: [],
                visible: false
            }
        };

        var map;
        var legend = document.querySelector("#legend-body");
        var colors = ["#36005a", "#FFd20f", "#B5b5b5", "#93b2fc", "#cc83fb", "#fcff83", "#bcef82", "red", "blue", "orange",
            "green"
        ];

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: new google.maps.LatLng(38.777701887125936, -94.55523804286008),
                zoom: 12
            });

            var legend = document.getElementById('legend');
            map.controls[google.maps.ControlPosition.TOP_RIGHT].push(legend);

            var searchPannel = document.getElementById('searchPannel');
            map.controls[google.maps.ControlPosition.TOP_LEFT].push(searchPannel);

            var input = document.getElementById('pac-input');
            var autocomplete = new google.maps.places.Autocomplete(input);
            autocomplete.bindTo('bounds', map);
            autocomplete.setTypes(['address']);

            var infowindow = new google.maps.InfoWindow();
            var marker = new google.maps.Marker({
                map: map,
                anchorPoint: new google.maps.Point(0, -29)
            });

            autocomplete.addListener('place_changed', function () {
                infowindow.close();
                marker.setVisible(false);
                var place = autocomplete.getPlace();
                if (!place.geometry) {
                    // User entered the name of a Place that was not suggested and
                    // pressed the Enter key, or the Place Details request failed.
                    window.alert("No details available for input: '" + place.name + "'");
                    return;
                }

                marker.setIcon( /** @type {google.maps.Icon} */({
                    url: place.icon,
                    size: new google.maps.Size(71, 71),
                    origin: new google.maps.Point(0, 0),
                    anchor: new google.maps.Point(17, 34),
                    scaledSize: new google.maps.Size(35, 35)
                }));
                marker.setPosition(place.geometry.location);
                marker.setVisible(true);

                var address = '';
                if (place.address_components) {
                    address = [(place.address_components[0] && place.address_components[0].short_name || ''), (place.address_components[
                        1] && place.address_components[1].short_name || ''), (place.address_components[2] && place.address_components[
                            2].short_name || '')].join(' ');
                }
                infowindow.setContent(address);
                infowindow.open(map, marker);
            });


            google.maps.event.addListenerOnce(map, 'tilesloaded', function (event) {
                legend.style.display = "inline";
                searchPannel.style.display = "inline"
            });

            const poly = {
                "type": "FeatureCollection",
                "name": "shapes_city",
                "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
                "features": [
                    { "type": "Feature", "properties": { "id": 134, "name": "Gladden" }, "geometry": { "type": "Polygon", "coordinates": [[[-94.529421, 38.843645], [-94.532213, 38.843784], [-94.537827, 38.84403], [-94.543483, 38.844079], [-94.552262, 38.844508], [-94.558901, 38.844918], [-94.563895, 38.845125], [-94.571564, 38.845559], [-94.579884, 38.845972], [-94.582632, 38.846107], [-94.585572, 38.8462], [-94.585887, 38.841059], [-94.585417, 38.838803], [-94.585089, 38.837231], [-94.584489, 38.834355], [-94.584489, 38.834353], [-94.58444, 38.834149], [-94.584315, 38.833202], [-94.58432, 38.833151], [-94.58431, 38.833079], [-94.584592, 38.83045], [-94.58501, 38.827214], [-94.585396, 38.823148], [-94.585544, 38.820862], [-94.58565, 38.819292], [-94.585749, 38.817881], [-94.583218, 38.817713], [-94.582279, 38.817656], [-94.578132, 38.817376], [-94.572001, 38.816973], [-94.568242, 38.816726], [-94.561506, 38.816309], [-94.55492, 38.81592], [-94.551594, 38.815716], [-94.542211, 38.81514], [-94.538203, 38.814925], [-94.532071, 38.814597], [-94.525745, 38.814249], [-94.525651, 38.815854], [-94.525536, 38.817803], [-94.525277, 38.819445], [-94.525187, 38.820012], [-94.524938, 38.820473], [-94.524084, 38.822059], [-94.522806, 38.823367], [-94.522473, 38.823663], [-94.521057, 38.824923], [-94.522272, 38.826198], [-94.523932, 38.827939], [-94.524745, 38.829338], [-94.525486, 38.830612], [-94.526081, 38.831636], [-94.526925, 38.833403], [-94.528451, 38.836598], [-94.529307, 38.839269], [-94.529846, 38.840831], [-94.529759, 38.84141], [-94.529617, 38.842347], [-94.529421, 38.843645]]] } },
                    { "type": "Feature", "properties": { "id": 567, "name": "Kentucky Trail" }, "geometry": { "type": "Polygon", "coordinates": [[[[-94.517556, 38.843048], [-94.529421, 38.843645], [-94.529617, 38.842347], [-94.529759, 38.84141], [-94.529846, 38.840831], [-94.529307, 38.839269], [-94.528451, 38.836598], [-94.526925, 38.833403], [-94.525486, 38.830612], [-94.524745, 38.829338], [-94.523932, 38.827939], [-94.522272, 38.826198], [-94.521057, 38.824923], [-94.522473, 38.823663], [-94.524084, 38.822059], [-94.524938, 38.820473], [-94.525277, 38.819445], [-94.525536, 38.817803], [-94.525651, 38.815854], [-94.525745, 38.814249], [-94.522926, 38.81414], [-94.522161, 38.814087], [-94.511037, 38.813585], [-94.502862, 38.813256], [-94.502521, 38.811068], [-94.50195, 38.80951], [-94.497317, 38.809321], [-94.497062, 38.812789], [-94.497022, 38.813087], [-94.495031, 38.813002], [-94.492574, 38.812896], [-94.491301, 38.826093], [-94.490653, 38.834063], [-94.490252, 38.839073], [-94.490035, 38.841713], [-94.49213, 38.841707], [-94.502018, 38.842167], [-94.505276, 38.842333], [-94.50673, 38.842407], [-94.524042, 38.843364], [-94.520121, 38.843174], [-94.517556, 38.843048]]], [[[-94.515951, 38.842967], [-94.516238, 38.842983], [-94.517556, 38.843048], [-94.515951, 38.842967]]], [[[-94.515951, 38.842967], [-94.509823, 38.842621], [-94.5075, 38.842507], [-94.507196, 38.842526], [-94.515951, 38.842967]]]] } },
                    { "type": "Feature", "properties": { "id": null, "name": "Cambridge" }, "geometry": { "type": "Polygon", "coordinates": [[[-94.585572, 38.8462], [-94.591663, 38.846468], [-94.598264, 38.846767], [-94.605021, 38.847071], [-94.608033, 38.847207], [-94.608085, 38.842837], [-94.608264, 38.827797], [-94.608239, 38.802526], [-94.608748, 38.758863], [-94.609532, 38.720149], [-94.563352, 38.717873], [-94.563272, 38.719797], [-94.562849, 38.729971], [-94.562479, 38.738899], [-94.562115, 38.739881], [-94.515992, 38.737271], [-94.515504, 38.745806], [-94.515001, 38.761888], [-94.513808, 38.775503], [-94.513127, 38.78742], [-94.511632, 38.813588], [-94.518245, 38.813817], [-94.522161, 38.814087], [-94.525745, 38.814249], [-94.528284, 38.814363], [-94.530628, 38.814501], [-94.534784, 38.814736], [-94.538203, 38.814925], [-94.543265, 38.815194], [-94.551594, 38.815716], [-94.559707, 38.816198], [-94.561506, 38.816309], [-94.565432, 38.816541], [-94.568242, 38.816726], [-94.572001, 38.816973], [-94.578132, 38.817376], [-94.583218, 38.817713], [-94.58575, 38.817866], [-94.585749, 38.817881], [-94.585396, 38.823148], [-94.585256, 38.8251], [-94.584967, 38.827659], [-94.584592, 38.83045], [-94.58432, 38.833151], [-94.584489, 38.834353], [-94.58467, 38.835112], [-94.585089, 38.837231], [-94.585417, 38.838803], [-94.585887, 38.841059], [-94.585878, 38.842088], [-94.585731, 38.843921], [-94.585572, 38.8462]]] } }
                ]
            }
           
            allPolygons.HS.polygons = upalodGeojson(poly)
            showHidePolygons(allPolygons.HS, true)
        }

        function upalodGeojson(data) {
            // add as MultiPolygons
            var polygons = [];
            var index = 0;
            data.features.map(function (item, key) {

                var coordinates = item.geometry.coordinates;
                if (coordinates.length < 2) coordinates = [coordinates]
                var paths = _.map(coordinates, function (entry) {
                    return _.reduce(entry, function (list, polygon) {
                        // This map() only transforms the data.
                        _.each(_.map(polygon, function (point) {
                            // Important: the lat/lng are vice-versa in GeoJSON
                            return new google.maps.LatLng(point[1], point[0]);
                        }), function (point) {
                            list.push(point);
                        });
                        return list;
                    }, []);
                });

                var polygon = new google.maps.Polygon({
                    paths: paths,
                    //name: item.properties.NAME,
                    name: item.properties.TERRITORY,
                    school: item.properties.School,
                    // district: item.properties.DISTRICT,
                    fillColor: (function () {
                        if (data.name === "HS") {
                            return ["red", "blue"][key]
                        }
                        return colors[key]
                    })(),
                    strokeWeight: 1.0,
                    strokeColor: "#000000",
                    fillOpacity: 0.5,
                    indexId: index++,
                    name: item.properties.name
                });

                polygon.setMap(map);
                polygon.setVisible(true);

                google.maps.event.addListener(polygon, 'mouseover', function (event) {
                    polygon.setOptions({
                        strokeWeight: 4.0,
                    });
                    console.log('', polygon);
                    document.querySelector('[name="' + polygon.name + '"]').style.backgroundColor = "#ccc";
                });

                google.maps.event.addListener(polygon, 'mouseout', function (event) {

                    polygon.setOptions({
                        strokeWeight: 1.0,
                    });

                    var d = Array.from(document.querySelectorAll('.legend-member-core'));
                    d.forEach(function (i) {
                        i.style.backgroundColor = "white";
                    })

                });
                polygons.push(polygon)
            })
            return polygons;
        }


        function showHidePolygons(polygon, display) {

            Object.values(allPolygons).filter(function (item) {
                return item.visible === true
            }).map(function (item) {
                item.polygons.map(function (poly) {
                    poly.setVisible(false); // clear prev polygons
                })
            })
            legend.innerHTML = ""; // clear legend
            var legendText = '';
            polygon.polygons.map(function (item, key) {
                console.log('---------', item);
                item.setVisible(display);
                legendText += '<div class="legend-member-core" name="' + item.name + '">' +
                    '<div style="background-color:' + item.fillColor +
                    ';float:left;margin-top:5px;margin-left:5px;height:20px;width:30px;border:1px solid #CCC;"></div>' +
                    '<span id="id' + key + '" class="legend-member-text">' + item.name + '</span></div>';
            })
            legend.innerHTML = legendText;
            polygon.visible = true;
        }

        function checkPolygons(location) {
            var schoolName = "Unknown";
            polygons.map(function (item) {
                if (google.maps.geometry.poly.containsLocation(location, item)) {
                    schoolName = item.school
                }
            })
            return schoolName;
        }

        /* ============= MODAL ===================*/
        var modal = document.getElementById("myModal");
        var span = document.getElementsByClassName("close")[0];
        var close = document.getElementById("closeModal");
        modal.style.display = "block";
        span.onclick = function () {
            modal.style.display = "none";
        }
        close.onclick = function () {
            modal.style.display = "none";
        }

    </script>
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCyuuT06Ok-Nor3ynbIsTQOj_ZtYaeQGU8&libraries=places&callback=initMap"
        async defer></script>
</body>

</html>